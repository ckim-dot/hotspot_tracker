{% extends 'base.html' %} {% block content %}
<div
  class="d-flex flex-row justify-content-between pt-5 pb-5 align-items-center"
>
  <h1>{% block title %} Tracker {% endblock %}</h1>
  <button type="submit" class="btn" data-toggle="modal" data-target="#modal">
    <div
      class="d-flex align-items-center justify-content-end"
      style="width: 125px"
    >
      <img src="/static/images/plus-solid.svg" alt="" width="15" />
      <span class="pl-2">Add Hotspot</span>
    </div>
  </button>
</div>
<div class="d-flex flex-column">
  <div class="d-flex justify-content-start w-75 pb-4">
    <div
      class="w-100 d-flex flex-row justify-content-between align-items-center"
    >
      <div class="w-50 d-flex flex-row">
        <input
          type="search"
          class="form-control mr-sm-2 rounded-pill bg-light"
          placeholder="e.g. ECPL 123"
          aria-label="Search"
          id="search-input"
        />
      </div>
    <form
      method="POST"
      action="{{url_for('confirm_delete')}}"
      
    >
      <button type="submit" class="btn btn-outline-danger">
        Delete All Enabled
      </button>
      </div>
    </form>
  </div>

  <div
    class="modal fade"
    id="modal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="Add New HotSpot"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add HotSpot</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form action="{{url_for('create')}}" method="POST">
          <div class="modal-body">
            <div class="form-group">
              <label for="name">Call Number</label
              ><input
                name="name"
                type="text"
                placeholder="ABCD 123"
                class="form-control"
                required
              />
            </div>
            <div class="">
              <fieldset id="radios">
                <div
                  class="d-flex flex-row justify-content-between w-100"
                  style="height: 50px"
                >
                  <div
                    id="disabled-box"
                    class="d-flex align-items-center justify-content-between"
                    style="
                      width: 225px;
                      border-style: solid;
                      border-width: 1px;
                      border-radius: 10px;
                      border-color: #2c83ec;
                      background-color: #d4e9fe;
                    "
                  >
                    <label for="disabled" class="mb-0 p-2">Disabled</label>
                    <input
                      type="radio"
                      id="disabled"
                      name="disabled"
                      value="disable"
                      class="mr-3"
                      checked
                    />
                  </div>
                  <div
                    id="enabled-box"
                    class="d-flex align-items-center justify-content-between"
                    style="
                      width: 225px;
                      border-style: solid;
                      border-width: 1px;
                      border-color: #ced4da;
                      border-radius: 10px;
                    "
                  >
                    <label for="enabled" class="mb-0 p-2">Enabled</label>
                    <input
                      type="radio"
                      id="enabled"
                      name="disabled"
                      value="enable"
                      class="mr-3"
                    />
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div id="search-results">
    {% for hotspot in hotspots %}
    <div class="d-flex flex-row w-100 justify-content-start">
      <div class="h-50 w-75 m-1 bg-dark text-white" style="border-radius: 10px">
        <div
          class="h-100 d-flex flex-row p-3 justify-content-between align-items-center"
        >
          <div style="font-size: 20px; padding-left: 10px">
            <a
              href="{{ url_for('edit', id=hotspot['id'])}}"
              style="color: white"
              >{{hotspot['call_number']}}</a
            >
          </div>
          {% if hotspot['is_disabled'] %}
          <div
            class="d-flex justify-content-center align-items-center"
            style="background-color: #a8a8a8; width: 101px; height: 32px"
          >
            <span class="text-dark" style="font-weight: 600"
              ><a
                href="{{ url_for('toggle', id=hotspot['id'])}}"
                style="color: black"
              >
                <span>Disabled</span>
              </a></span
            >
          </div>
          {% else %}
          <div
            class="d-flex justify-content-center align-items-center"
            style="background-color: #84e68a; width: 101px; height: 32px"
          >
            <span class="text-dark" style="font-weight: 600"
              ><a
                href="{{ url_for('toggle', id=hotspot['id'])}}"
                style="color: black"
              >
                <span>Enabled</span>
              </a></span
            >
          </div>
          {% endif %}
        </div>
      </div>
      <form
        action="{{url_for('delete', id=hotspot['id'])}}"
        method="post"
        class="d-flex align-items-center"
      >
        <button
          class="btn btn-sm mt-3 mb-3"
          onclick="return confirm('Are you sure you want to delete this hotspot?')"
        >
          <img src="/static/images/x-solid.svg" alt="" width="10" />
        </button>
        <!-- <a href="{{ url_for('edit', id=hotspot['id'])}}">
        <span>Edit</span>
      </a> -->
      </form>
    </div>
    {% endfor %}
  </div>
  <script>
    document
      .getElementById("radios")
      .addEventListener("change", function (event) {
        if (document.getElementById("disabled").checked) {
          document.getElementById("enabled-box").style.borderColor = "#ced4da";
          document.getElementById("enabled-box").style.backgroundColor =
            "transparent";
          document.getElementById("disabled-box").style.borderColor = "#2c83ec";
          document.getElementById("disabled-box").style.backgroundColor =
            "#d4e9fe";
        } else {
          document.getElementById("disabled-box").style.borderColor = "#ced4da";
          document.getElementById("disabled-box").style.backgroundColor =
            "transparent";
          document.getElementById("enabled-box").style.borderColor = "#2c83ec";
          document.getElementById("enabled-box").style.backgroundColor =
            "#d4e9fe";
        }
      });

    $(document).ready(function () {
      $("#search-input").on("input", function () {
        let query = $(this).val();
        $.ajax({
          url: "/",
          type: "GET",
          data: { search_query: query, is_searching: 1 },
          success: function (data) {
            $("#search-results").html(data);
          },
        });
      });
    });
  </script>
  {% endblock%}
</div>
