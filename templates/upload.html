{% extends 'base.html' %} {% block content %}


<div class="d-flex flex-column pt-5 pb-3">
  <h1 class="pb-5">{% block title %} Updates to Make {% endblock %}</h1>
  <div class="d-flex justify-content-center align-items-center">
      
      <form method="post" enctype="multipart/form-data" action="{{url_for('upload')}}" class="d-flex flex-column align-items-center w-100">

        <div class="w-100 d-flex justify-content-center align-items-center mb-3" style="background-color: #D9D9D9; height: 62px">
          <label for="file-upload" style="cursor:pointer; margin-bottom: 0px" class="text-dark w-100"><div class="d-flex flex-row justify-content-center"><img src="/static/images/file-import-solid.svg" alt="" width="20" style="margin-right:10px" />Select File (.xlsx, .xls)</div></label>
          <input id="file-upload" type="file" name="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" style="display:none"></input>
        </div>
        <div class="d-flex flex-row align-items-center w-25 justify-content-between">
          <div class="d-flex flex-row align-items-center">
            <img src="/static/images/file-excel-solid.svg" alt="" width="20" style="margin-right:10px" />
            <div id="file-name" style="height: 30px; color: gray" class="d-flex justify-content-center align-items-center mr-2">File chosen</div>
          </div>
          
          <button type="submit" class="btn text-white" style="background-color:#457bba; width: 121px; height: 45px">Submit</button>
        </div>
      </form>
      <script>
        var input = $("input:file");
      </script>
      
  </div>
</div>
<div class="d-flex flex-row w-100 justify-content-start">
  <div class="w-100 m-1 text-black" style="border-radius: 10px">
        <div
          class="d-flex flex-row pl-3 pr-3 justify-content-between align-items-center"
        >
          <div class="d-flex w-25 flex-row align-items-center justify-content-between">
            Call Number
            <div class="d-flex flex-row align-items-center justify-content-between w-25">
              Phone
            </div>
          </div>
        </div>
      </div>
</div>
<div class="d-flex flex-row w-100 justify-content-start mb-3" style="background-color: #ced4da; height:1px"></div>

{% if not submitted %}
<div class="d-flex flex-column w-100">
  <div class="d-flex flex-column pb-4 w-100">
    <div class="w-100 d-flex justify-content-center align-items-center flex-column" style="height: 225px; border-radius: 10px; border-style: dashed; outline-width:2px; border-color: #ced4da">
      Upload an excel file to see hotspots to ENABLE, DISABLE, GRACE
    </div>
  </div>
  
</div>
{% else %}
<div class="d-flex flex-column w-100">
  <div class="d-flex flex-column pb-4 w-100">
    <h2>Enable</h2>
    {% if to_enable | length == 0 %}
      <p class="pl-3">Nothing.</p>
    {% endif %}
    
    {% for hotspot in to_enable %}
      <div class="d-flex flex-row w-100">
        <div class="h-60 w-100 m-1 bg-dark text-white" style="border-radius: 10px">
          <div
            class="w-25 d-flex flex-row p-3 justify-content-between align-items-center" 
          >
            <div style="padding-left: 10px">{{hotspot['call_number']}}</div>
            <div class="d-flex flex-row align-items-center justify-content-between w-25">
              <div style="background-color:#a8a8a8; width:1px; height:32px"></div>
              <span style="color: #d8d8d8; font-size: medium; font-style:italic">{{hotspot['phone_number']}}</span>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="d-flex flex-column pb-4 w-100">
    <h2>Disable</h2>
    
    {% if to_disable | length == 0 %}
      <p class="pl-3">Nothing.</p>
    {% endif %}
    
    {% for hotspot in to_disable %}
    <div class="d-flex flex-row w-100">
      <div class="h-60 w-100 m-1 bg-dark text-white" style="border-radius: 10px">
        <div
          class="w-25 d-flex flex-row p-3 justify-content-between align-items-center"
        >
          <div style="padding-left: 10px">{{hotspot[0]}}</div>
          <div class="d-flex flex-row align-items-center justify-content-between w-25">
              <div style="background-color:#a8a8a8; width:1px; height:32px"></div>
              <span style="color: #d8d8d8; font-size: medium; font-style:italic">{{hotspot[1]}}</span>
            </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="d-flex flex-column w-100">
  <div class="d-flex flex-column pb-4 w-100">
    <h2>Grace</h2>
    {% if grace | length == 0 %}
      <p class="pl-3">Nothing.</p>
    {% endif %}
    
    {% for hotspot in grace %}
      <div class="d-flex flex-row w-100">
        <div class="h-60 w-100 m-1 bg-dark text-white" style="border-radius: 10px">
          <div
            class="w-25 d-flex flex-row p-3 justify-content-between align-items-center" 
          >
            <div style="padding-left: 10px">{{hotspot[0]}}</div>
            <div class="d-flex flex-row align-items-center justify-content-between w-25">
              <div style="background-color:#a8a8a8; width:1px; height:32px"></div>
              <span style="color: #d8d8d8; font-size: medium; font-style:italic">{{hotspot[1]}}</span>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

</div>
{% endif %}
<form method="post" action="{{url_for('update')}}" class="d-flex justify-content-end pt-3 pb-5">
  <button type="submit" class="btn d-flex justify-content-center text-white align-items-center" style="width:174px; height: 53px; background-color: #BA8445; font-size: 20px; font-weight: 600" 
  {%
    if
    to_disable | length == 0 and to_enable | length == 0
    %}
    disabled
    {%
    endif
    %}>Apply</button>
</form>
<script>
  
  document.getElementById('file-upload').addEventListener('change', function () {
    const files = event.target.files;
    document.getElementById("file-name").innerHTML = files[0].name
    })
  
</script>
{% endblock %}

